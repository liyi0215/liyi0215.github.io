<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name="baidu-site-verification" content="0JeUoId42d">
<meta baidu-gxt-verify-token="ab70f8329d281134cb6e95cfd4cc2709">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">








  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Php,Nginx,">






  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2">




<meta name="description" content="安装PHP添加brew的PHP扩展库：123brew updatebrew tap homebrew/dupesbrew tap josegonzalez/homebrew-php
可以使用brew options php55命令来查看安装php5.5的选项，这里我用下面的选项安装：1brew install php55
由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替">
<meta property="og:type" content="article">
<meta property="og:title" content="使用homebrew搭建PHP,Nginx(LNMP开发环境)">
<meta property="og:url" content="http://liyi.wiki/posts/41985/index.html">
<meta property="og:site_name" content="我的前端博客">
<meta property="og:description" content="安装PHP添加brew的PHP扩展库：123brew updatebrew tap homebrew/dupesbrew tap josegonzalez/homebrew-php
可以使用brew options php55命令来查看安装php5.5的选项，这里我用下面的选项安装：1brew install php55
由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替">
<meta property="og:updated_time" content="2016-11-07T03:23:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用homebrew搭建PHP,Nginx(LNMP开发环境)">
<meta name="twitter:description" content="安装PHP添加brew的PHP扩展库：123brew updatebrew tap homebrew/dupesbrew tap josegonzalez/homebrew-php
可以使用brew options php55命令来查看安装php5.5的选项，这里我用下面的选项安装：1brew install php55
由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替">


<script type="text/javascript" id="hexo.configuration">var NexT=window.NexT||{},CONFIG={scheme:"Pisces",sidebar:{position:"left",display:"hide"},fancybox:!0,motion:!0,duoshuo:{userId:"6347460904338064000",author:"WuMao"}}</script>



  <link rel="canonical" href="http://liyi.wiki/posts/41985/">


  <title> 使用homebrew搭建PHP,Nginx(LNMP开发环境) | 我的前端博客 </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">
  
  <canvas style="width:100%;height:100%;position:fixed"></canvas>
  

  


<script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-86965821-1","auto"),ga("send","pageview")</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta">
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">我的前端博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">前端呆萌小菜鸟</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a class="menu-item-link" href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i>
            
            <span>首页</span>
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a class="menu-item-link" href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i>
            
            <span>归档</span>
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a class="menu-item-link" href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i>
            
            <span>标签</span>
          </a>
        </li>
      
        
        <li class="menu-item menu-item-resume">
          <a class="menu-item-link" href="/resume" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-graduation-cap"></i>
            
            <span>简历</span>
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a class="menu-item-link" href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i>
            
            <span>关于</span>
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                使用homebrew搭建PHP,Nginx(LNMP开发环境)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-28T16:55:24+08:00" content="2016-10-28">
              2016-10-28
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/posts/41985/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="posts/41985/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
              &nbsp; | &nbsp;
              <span class="page-pv"><i class="fa fa-file-o"></i>
              <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="安装PHP"><a href="#安装PHP" class="headerlink" title="安装PHP"></a>安装PHP</h2><h3 id="添加brew的PHP扩展库："><a href="#添加brew的PHP扩展库：" class="headerlink" title="添加brew的PHP扩展库："></a>添加brew的PHP扩展库：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">brew update</div><div class="line">brew tap homebrew/dupes</div><div class="line">brew tap josegonzalez/homebrew-php</div></pre></td></tr></table></figure>
<p>可以使用brew options php55命令来查看安装php5.5的选项，这里我用下面的选项安装：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install php55</div></pre></td></tr></table></figure><p></p>
<h3 id="由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替代自带PHP版本。"><a href="#由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替代自带PHP版本。" class="headerlink" title="由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替代自带PHP版本。"></a>由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替代自带PHP版本。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">'export PATH="$(brew --prefix php55)/bin:$PATH"'</span> &gt;&gt; ~/.bash_profile  <span class="comment">#for php</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'export PATH="$(brew --prefix php55)/sbin:$PATH"'</span> &gt;&gt; ~/.bash_profile  <span class="comment">#for php-fpm</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'export PATH="/usr/local/bin:/usr/local/sbib:$PATH"'</span> &gt;&gt; ~/.bash_profile <span class="comment">#for other brew install soft</span></div><div class="line"><span class="built_in">source</span> ~/.bash_profile</div></pre></td></tr></table></figure>
<h3 id="测试一下效果："><a href="#测试一下效果：" class="headerlink" title="测试一下效果："></a>测试一下效果：</h3><h4 id="Mac自带的PHP"><a href="#Mac自带的PHP" class="headerlink" title="Mac自带的PHP"></a>Mac自带的PHP</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/usr/bin/php -v</div><div class="line"></div><div class="line">PHP 5.4.24 (cli) (built: Jan 19 2014 21:32:15) </div><div class="line">Copyright (c) 1997-2013 The PHP Group</div><div class="line">Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies</div></pre></td></tr></table></figure>
<h4 id="Mac自带的php-fpm"><a href="#Mac自带的php-fpm" class="headerlink" title="Mac自带的php-fpm"></a>Mac自带的php-fpm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/usr/sbin/php-fpm -v</div><div class="line"></div><div class="line">&gt; PHP 5.4.24 (fpm-fcgi) (built: Jan 19 2014 21:32:57)</div><div class="line">Copyright (c) 1997-2013 The PHP Group</div><div class="line">Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies</div></pre></td></tr></table></figure>
<h4 id="brew安装的php-他在-usr-local-opt-php55-bin-php"><a href="#brew安装的php-他在-usr-local-opt-php55-bin-php" class="headerlink" title="brew安装的php 他在/usr/local/opt/php55/bin/php"></a>brew安装的php 他在/usr/local/opt/php55/bin/php</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">php -v</div><div class="line"></div><div class="line">PHP 5.5.14 (cli) (built: Jul 16 2014 15:43:06) (DEBUG)</div><div class="line">Copyright (c) 1997-2014 The PHP Group</div><div class="line">Zend Engine v2.5.0, Copyright (c) 1998-2014 Zend Technologies</div><div class="line">    with Zend OPcache v7.0.3, Copyright (c) 1999-2014, by Zend Technologies</div><div class="line">    with Xdebug v2.2.5, Copyright (c) 2002-2014, by Derick Rethans</div></pre></td></tr></table></figure>
<h4 id="brew安装的php-fpm-他在-usr-local-opt-php55-sbin-php-fpm"><a href="#brew安装的php-fpm-他在-usr-local-opt-php55-sbin-php-fpm" class="headerlink" title="brew安装的php-fpm 他在/usr/local/opt/php55/sbin/php-fpm"></a>brew安装的php-fpm 他在/usr/local/opt/php55/sbin/php-fpm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">php-fpm -v</div><div class="line"></div><div class="line">PHP 5.5.14 (fpm-fcgi) (built: Jul 16 2014 15:43:12) (DEBUG)</div><div class="line">Copyright (c) 1997-2014 The PHP Group</div><div class="line">Zend Engine v2.5.0, Copyright (c) 1998-2014 Zend Technologies</div><div class="line">    with Zend OPcache v7.0.3, Copyright (c) 1999-2014, by Zend Technologies</div><div class="line">    with Xdebug v2.2.5, Copyright (c) 2002-2014, by Derick Rethans</div></pre></td></tr></table></figure>
<h2 id="修改php-fpm配置文件"><a href="#修改php-fpm配置文件" class="headerlink" title="修改php-fpm配置文件"></a>修改php-fpm配置文件</h2><blockquote>
<p><strong><code>vim /usr/local/etc/php/5.5/php-fpm.conf</code></strong>，找到pid相关大概在25行，去掉注释 <strong><code>pid = run/php-fpm.pid</code></strong>, 那么php-fpm的pid文件就会自动产生在<strong><code>/usr/local/var/run/php-fpm.pid</code></strong>，下面要安装的Nginx pid文件也放在这里。</p>
</blockquote>
<h3 id="测试配置"><a href="#测试配置" class="headerlink" title="测试配置"></a>测试配置</h3><h4 id="测试php-fpm配置"><a href="#测试php-fpm配置" class="headerlink" title="测试php-fpm配置"></a>测试php-fpm配置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">php-fpm -t</div><div class="line">php-fpm -c /usr/<span class="built_in">local</span>/etc/php/5.5/php.ini -y /usr/<span class="built_in">local</span>/etc/php/5.5/php-fpm.conf -t</div></pre></td></tr></table></figure>
<h4 id="启动php-fpm"><a href="#启动php-fpm" class="headerlink" title="启动php-fpm"></a>启动php-fpm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">php-fpm -D</div><div class="line">php-fpm -c /usr/<span class="built_in">local</span>/etc/php/5.5/php.ini -y /usr/<span class="built_in">local</span>/etc/php/5.5/php-fpm.conf -D</div></pre></td></tr></table></figure>
<h4 id="关闭php-fpm"><a href="#关闭php-fpm" class="headerlink" title="关闭php-fpm"></a>关闭php-fpm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">kill</span> -INT `cat /usr/<span class="built_in">local</span>/var/run/php-fpm.pid`</div></pre></td></tr></table></figure>
<h4 id="重启php-fpm"><a href="#重启php-fpm" class="headerlink" title="重启php-fpm"></a>重启php-fpm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">kill</span> -USR2 `cat /usr/<span class="built_in">local</span>/var/run/php-fpm.pid`</div></pre></td></tr></table></figure>
<h4 id="也可以用上文提到的brew命令来重启php-fpm，不过他官方不推荐用这个命令了"><a href="#也可以用上文提到的brew命令来重启php-fpm，不过他官方不推荐用这个命令了" class="headerlink" title="也可以用上文提到的brew命令来重启php-fpm，不过他官方不推荐用这个命令了"></a>也可以用上文提到的brew命令来重启php-fpm，不过他官方不推荐用这个命令了</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew services restart php55</div></pre></td></tr></table></figure>
<h2 id="PHP-FPM开机启动："><a href="#PHP-FPM开机启动：" class="headerlink" title="PHP-FPM开机启动："></a>PHP-FPM开机启动：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ln -sfv /usr/<span class="built_in">local</span>/opt/php55/*.plist ~/Library/LaunchAgents</div><div class="line">launchctl load ~/Library/LaunchAgents/homebrew.mxcl.php55.plist</div></pre></td></tr></table></figure>
<h2 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install nginx --with-http_geoip_module</div></pre></td></tr></table></figure>
<h2 id="Nginx启动关闭命令："><a href="#Nginx启动关闭命令：" class="headerlink" title="Nginx启动关闭命令："></a>Nginx启动关闭命令：</h2><h3 id="测试配置是否有语法错误"><a href="#测试配置是否有语法错误" class="headerlink" title="测试配置是否有语法错误"></a>测试配置是否有语法错误</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nginx -t</div></pre></td></tr></table></figure>
<h3 id="打开-nginx"><a href="#打开-nginx" class="headerlink" title="打开 nginx"></a>打开 nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo nginx</div></pre></td></tr></table></figure>
<h3 id="重新加载配置-重启-停止-退出-nginx"><a href="#重新加载配置-重启-停止-退出-nginx" class="headerlink" title="重新加载配置|重启|停止|退出 nginx"></a>重新加载配置|重启|停止|退出 nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nginx <span class="_">-s</span> reload|reopen|stop|quit</div></pre></td></tr></table></figure>
<h3 id="也可以使用Mac的launchctl来启动-停止"><a href="#也可以使用Mac的launchctl来启动-停止" class="headerlink" title="也可以使用Mac的launchctl来启动|停止"></a>也可以使用Mac的launchctl来启动|停止</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</div><div class="line">launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</div></pre></td></tr></table></figure>
<h3 id="Nginx开机启动"><a href="#Nginx开机启动" class="headerlink" title="Nginx开机启动"></a>Nginx开机启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ln -sfv /usr/<span class="built_in">local</span>/opt/nginx/*.plist ~/Library/LaunchAgents</div><div class="line">launchctl load ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</div></pre></td></tr></table></figure>
<h3 id="Nginx监听80端口需要root权限执行，因此："><a href="#Nginx监听80端口需要root权限执行，因此：" class="headerlink" title="Nginx监听80端口需要root权限执行，因此："></a>Nginx监听80端口需要root权限执行，因此：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo chown root:wheel /usr/<span class="built_in">local</span>/Cellar/nginx/1.6.0_1/bin/nginx</div><div class="line">sudo chmod u+s /usr/<span class="built_in">local</span>/Cellar/nginx/1.6.0_1/bin/nginx</div></pre></td></tr></table></figure>
<h2 id="配置nginx-conf"><a href="#配置nginx-conf" class="headerlink" title="配置nginx.conf"></a>配置nginx.conf</h2><h3 id="创建需要用到的目录："><a href="#创建需要用到的目录：" class="headerlink" title="创建需要用到的目录："></a>创建需要用到的目录：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mkdir -p /usr/<span class="built_in">local</span>/var/logs/nginx</div><div class="line">mkdir -p /usr/<span class="built_in">local</span>/etc/nginx/sites-enabled</div><div class="line">mkdir -p /usr/<span class="built_in">local</span>/etc/nginx/conf.d</div><div class="line">sudo mkdir -p /var/www</div><div class="line">sudo chown :staff /var/www</div><div class="line">sudo chmod 775 /var/www</div></pre></td></tr></table></figure>
<h3 id="vim-usr-local-etc-nginx-nginx-conf-输入以下内容"><a href="#vim-usr-local-etc-nginx-nginx-conf-输入以下内容" class="headerlink" title="vim /usr/local/etc/nginx/nginx.conf 输入以下内容:"></a><strong><code>vim /usr/local/etc/nginx/nginx.conf</code></strong> 输入以下内容:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">worker_processes  1;</div><div class="line">error_log   /usr/local/var/logs/nginx/error.log debug;</div><div class="line">pid        /usr/local/var/run/nginx.pid;</div><div class="line"></div><div class="line">events &#123;</div><div class="line">    worker_connections  256;</div><div class="line">&#125;</div><div class="line"></div><div class="line">http &#123;</div><div class="line">    include       mime.types;</div><div class="line">    default_type  application/octet-stream;</div><div class="line"></div><div class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</div><div class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</div><div class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</div><div class="line"></div><div class="line">    access_log  /usr/local/var/logs/access.log  main;</div><div class="line"></div><div class="line">    sendfile        on;</div><div class="line">    keepalive_timeout  65;</div><div class="line">    port_in_redirect off;</div><div class="line"></div><div class="line">    include /usr/local/etc/nginx/sites-enabled/*.conf;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="nginx虚拟主机准备工作-创建-info-php-index-html-404-html-403-html文件到-var-www-下面"><a href="#nginx虚拟主机准备工作-创建-info-php-index-html-404-html-403-html文件到-var-www-下面" class="headerlink" title="nginx虚拟主机准备工作 - 创建 info.php index.html 404.html 403.html文件到 /var/www 下面"></a>nginx虚拟主机准备工作 - 创建 info.php index.html 404.html 403.html文件到 /var/www 下面</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vi /var/www/info.php</div><div class="line">vi /var/www/index.html</div><div class="line">vi /var/www/403.html</div><div class="line">vi /var/www/404.html</div></pre></td></tr></table></figure>
<h3 id="创建默认虚拟主机default"><a href="#创建默认虚拟主机default" class="headerlink" title="创建默认虚拟主机default"></a>创建默认虚拟主机default</h3><p><strong><code>vim /usr/local/etc/nginx/sites-available/default</code></strong>输入：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       80;</div><div class="line">    server_name  localhost;</div><div class="line">    root         /var/www/;</div><div class="line"></div><div class="line">    access_log  /usr/local/var/logs/nginx/default.access.log  main;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        index  index.html index.htm index.php;</div><div class="line">        autoindex   on;</div><div class="line">        if (!-f $request_filename)&#123;</div><div class="line">            rewrite ^.*$ /index.php last;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    location ~ \.php$ &#123;</div><div class="line">        try_files                   $uri = 404;</div><div class="line">        fastcgi_pass                127.0.0.1:9000;</div><div class="line">        fastcgi_index               index.php;</div><div class="line">        fastcgi_intercept_errors    on;</div><div class="line">        include /usr/local/etc/nginx/fastcgi.conf;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    location = /info &#123;</div><div class="line">        allow   127.0.0.1;</div><div class="line">        deny    all;</div><div class="line">        rewrite (.*) /.info.php;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    error_page  404     /404.html;</div><div class="line">    error_page  403     /403.html;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding:10px 0;margin:20px auto;width:90%;text-align:center">
    <button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'>
      <span>赏</span>
    </button>
    <div class="content">
      <div class="loader">
        
          
            <span class="loader_letter">我 </span>
          
            <span class="loader_letter">知 </span>
          
            <span class="loader_letter">道 </span>
          
            <span class="loader_letter">是 </span>
          
            <span class="loader_letter">不 </span>
          
            <span class="loader_letter">会 </span>
          
            <span class="loader_letter">有 </span>
          
            <span class="loader_letter">人 </span>
          
            <span class="loader_letter">点 </span>
          
            <span class="loader_letter">的 </span>
          
            <span class="loader_letter">， </span>
          
            <span class="loader_letter">但 </span>
          
            <span class="loader_letter">万 </span>
          
            <span class="loader_letter">一 </span>
          
            <span class="loader_letter">有 </span>
          
            <span class="loader_letter">人 </span>
          
            <span class="loader_letter">想 </span>
          
            <span class="loader_letter">不 </span>
          
            <span class="loader_letter">开 </span>
          
            <span class="loader_letter">呢 </span>
          
            <span class="loader_letter">？ </span>
          
        
      </div>
    </div> 

    <div id="QR" style="display:none">
      
        <div id="wechat" style="display:inline-block">
          <img id="wechat_qr" src="/uploads/wechat-qrcode.jpg" alt="李燚 WeChat Pay">
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display:inline-block">
          <img id="alipay_qr" src="/uploads/alipay-qrcode.jpg" alt="李燚 Alipay">
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Php/" rel="tag">#Php</a>
          
            <a href="/tags/Nginx/" rel="tag">#Nginx</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/32967/" rel="next" title="launchpad自定义行列数Dock">
                <i class="fa fa-chevron-left"></i> launchpad自定义行列数Dock
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/20662/" rel="prev" title="hexo添加不被hexo编译的静态网页">
                hexo添加不被hexo编译的静态网页 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        
<div class="jiathis_style">
	<span class="jiathis_txt">分享到：</span>
	<a class="jiathis_button_tools_1"></a>
	<a class="jiathis_button_tools_2"></a>
	<a class="jiathis_button_tools_3"></a>
	<a class="jiathis_button_tools_4"></a>
	<a href="http://www.jiathis.com/share?uid=2071304" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
	<a class="jiathis_counter_style"></a>
</div>


<div class="addthis_inline_share_toolbox">
  <script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=2071304" charset="utf-8" async="async"></script>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="posts/41985/" data-title="使用homebrew搭建PHP,Nginx(LNMP开发环境)" data-url="http://liyi.wiki/posts/41985/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/uploads/avatar.jpg" alt="李燚">
          <div class="circle"></div>
          <p class="site-author-name" itemprop="name">李燚</p>
          <p class="site-description motion-element" itemprop="description">克服困难解决问题,自学自励积极向上</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/liyi0215" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/liyi0215" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/lp0112" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/ileeyi" target="_blank" title="Zhihu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Zhihu
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装PHP"><span class="nav-number">1.</span> <span class="nav-text">安装PHP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#添加brew的PHP扩展库："><span class="nav-number">1.1.</span> <span class="nav-text">添加brew的PHP扩展库：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替代自带PHP版本。"><span class="nav-number">1.2.</span> <span class="nav-text">由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替代自带PHP版本。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试一下效果："><span class="nav-number">1.3.</span> <span class="nav-text">测试一下效果：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Mac自带的PHP"><span class="nav-number">1.3.1.</span> <span class="nav-text">Mac自带的PHP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mac自带的php-fpm"><span class="nav-number">1.3.2.</span> <span class="nav-text">Mac自带的php-fpm</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#brew安装的php-他在-usr-local-opt-php55-bin-php"><span class="nav-number">1.3.3.</span> <span class="nav-text">brew安装的php 他在/usr/local/opt/php55/bin/php</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#brew安装的php-fpm-他在-usr-local-opt-php55-sbin-php-fpm"><span class="nav-number">1.3.4.</span> <span class="nav-text">brew安装的php-fpm 他在/usr/local/opt/php55/sbin/php-fpm</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改php-fpm配置文件"><span class="nav-number">2.</span> <span class="nav-text">修改php-fpm配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#测试配置"><span class="nav-number">2.1.</span> <span class="nav-text">测试配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#测试php-fpm配置"><span class="nav-number">2.1.1.</span> <span class="nav-text">测试php-fpm配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动php-fpm"><span class="nav-number">2.1.2.</span> <span class="nav-text">启动php-fpm</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关闭php-fpm"><span class="nav-number">2.1.3.</span> <span class="nav-text">关闭php-fpm</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#重启php-fpm"><span class="nav-number">2.1.4.</span> <span class="nav-text">重启php-fpm</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#也可以用上文提到的brew命令来重启php-fpm，不过他官方不推荐用这个命令了"><span class="nav-number">2.1.5.</span> <span class="nav-text">也可以用上文提到的brew命令来重启php-fpm，不过他官方不推荐用这个命令了</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PHP-FPM开机启动："><span class="nav-number">3.</span> <span class="nav-text">PHP-FPM开机启动：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装Nginx"><span class="nav-number">4.</span> <span class="nav-text">安装Nginx</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Nginx启动关闭命令："><span class="nav-number">5.</span> <span class="nav-text">Nginx启动关闭命令：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#测试配置是否有语法错误"><span class="nav-number">5.1.</span> <span class="nav-text">测试配置是否有语法错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打开-nginx"><span class="nav-number">5.2.</span> <span class="nav-text">打开 nginx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重新加载配置-重启-停止-退出-nginx"><span class="nav-number">5.3.</span> <span class="nav-text">重新加载配置|重启|停止|退出 nginx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#也可以使用Mac的launchctl来启动-停止"><span class="nav-number">5.4.</span> <span class="nav-text">也可以使用Mac的launchctl来启动|停止</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Nginx开机启动"><span class="nav-number">5.5.</span> <span class="nav-text">Nginx开机启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Nginx监听80端口需要root权限执行，因此："><span class="nav-number">5.6.</span> <span class="nav-text">Nginx监听80端口需要root权限执行，因此：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置nginx-conf"><span class="nav-number">6.</span> <span class="nav-text">配置nginx.conf</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建需要用到的目录："><span class="nav-number">6.1.</span> <span class="nav-text">创建需要用到的目录：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vim-usr-local-etc-nginx-nginx-conf-输入以下内容"><span class="nav-number">6.2.</span> <span class="nav-text">vim /usr/local/etc/nginx/nginx.conf 输入以下内容:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nginx虚拟主机准备工作-创建-info-php-index-html-404-html-403-html文件到-var-www-下面"><span class="nav-number">6.3.</span> <span class="nav-text">nginx虚拟主机准备工作 - 创建 info.php index.html 404.html 403.html文件到 /var/www 下面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建默认虚拟主机default"><span class="nav-number">6.4.</span> <span class="nav-text">创建默认虚拟主机default</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">李燚</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>
        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  

  
    
  

  <script type="text/javascript">var duoshuoQuery={short_name:"mrliyi"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.id="duoshuo-script",t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),s=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!1,s=r.title.trim().toLowerCase(),n=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),i=r.url,o=-1,l=-1,p=-1;if(""!=s&&a.forEach(function(e,t){o=s.indexOf(e),l=n.indexOf(e),(o>=0||l>=0)&&(c=!0,0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+i+"' class='search-result-title'>"+s+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;u<0&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),s.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script>


  

  

  

  

  
    <script type="text/javascript" src="/js/src/myjs/canvas.js"></script>

</body>
</html>
